<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>#&gt; opsech.io - openwrt</title><link href="https://opsech.io/" rel="alternate"></link><link href="https://opsech.io/feeds/openwrt.atom.xml" rel="self"></link><id>https://opsech.io/</id><updated>2016-03-24T00:58:27-04:00</updated><entry><title>Bootstrapping OpenWRT sysupgrade for snapshot releases</title><link href="https://opsech.io/posts/2016/Mar/24/bootstrapping-openwrt-sysupgrade-snapshots.html" rel="alternate"></link><published>2016-03-24T00:58:27-04:00</published><updated>2016-03-24T00:58:27-04:00</updated><author><name>Mike</name></author><id>tag:opsech.io,2016-03-24:/posts/2016/Mar/24/bootstrapping-openwrt-sysupgrade-snapshots.html</id><summary type="html">&lt;p&gt;After &lt;a href="https://www.reddit.com/r/openwrt/comments/4aukq9/help_archer_c7_v2_not_reachable_on_19216811_after/"&gt;figuring out that the new Archer C7 comes with a different flash chip&lt;/a&gt; that is not yet supported by an official release, I soon realized that it (the snapshot) does not come with all the bells and whistles that a normal release does; namely LuCI and ath10k&amp;nbsp;firmware.&lt;/p&gt;
&lt;p&gt;As …&lt;/p&gt;</summary><content type="html">&lt;p&gt;After &lt;a href="https://www.reddit.com/r/openwrt/comments/4aukq9/help_archer_c7_v2_not_reachable_on_19216811_after/"&gt;figuring out that the new Archer C7 comes with a different flash chip&lt;/a&gt; that is not yet supported by an official release, I soon realized that it (the snapshot) does not come with all the bells and whistles that a normal release does; namely LuCI and ath10k&amp;nbsp;firmware.&lt;/p&gt;
&lt;p&gt;As a result, and after getting a grip on how this software works, I wanted to make a small &lt;code&gt;rc.local&lt;/code&gt; script to automate the process of going from sysupgrade -&amp;gt; fully working exactly the way it was. (Since a sysupgrade currently removes all &lt;code&gt;opkg&lt;/code&gt; packages and resets service states when you reinstall the packages) To implement this script, if you have luci, go to http://&lt;your_openwrt_ip&gt;/cgi-bin/luci/admin/system/startup (or navigate to System -&amp;gt; Startup) and look for the &amp;#8220;Local Startup&amp;#8221; input box. Copy and paste the script there, and make any modifications&amp;nbsp;necessary. &lt;/p&gt;
&lt;p&gt;The result (for me) is that I can throw a sysupgrade image at LuCI, flash that image, and two reboots later I&amp;#8217;m back exactly the way I was. &lt;strong&gt;Please understand that this is customized specifically to my needs and you&amp;#8217;ll need to change things around for yourself&lt;/strong&gt;, specifically I am using the Archer as an 802.11ac &lt;span class="caps"&gt;AP&lt;/span&gt; and I don&amp;#8217;t need typical router functionality, so I&amp;#8217;m disabling services like &lt;code&gt;odhcpd&lt;/code&gt; and &lt;code&gt;dnsmasq&lt;/code&gt; on&amp;nbsp;boot. &lt;/p&gt;
&lt;p&gt;In the spirit of sharing, here it&amp;nbsp;is: &lt;/p&gt;
&lt;script src="https://gist.github.com/xenithorb/720c85fe1afafb135419.js"&gt;&lt;/script&gt;

&lt;p&gt;Originally posted to /r/OpenWRT: &lt;a href="https://www.reddit.com/r/openwrt/comments/4bq9en/little_bootstrap_rclocal_script_for_snapshot/"&gt;https://www.reddit.com/r/openwrt/comments/4bq9en/little_bootstrap_rclocal_script_for_snapshot/&lt;/a&gt; (I am the original&amp;nbsp;author)&lt;/p&gt;</content><category term="openwrt"></category><category term="scripting"></category><category term="wifi"></category></entry></feed>